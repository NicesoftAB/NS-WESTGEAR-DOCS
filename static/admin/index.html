<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex" />
    <title>WestGear – Redigera innehåll</title>
  </head>
  <body>
    <script>
      window.CMS_MANUAL_INIT = true;
    </script>
    <script src="/admin/decap-cms.js"></script>
    <script>
      // Wait for CMS to be available, then initialize
      (function initCMS() {
        if (typeof window.CMS === 'undefined' || !window.CMS.init) {
          setTimeout(initCMS, 100);
          return;
        }
        
        window.CMS.init({
          config: {
            backend: {
              name: 'git-gateway',
              branch: 'main'
            },
            local_backend: true,
            publish_mode: 'simple',
            media_folder: 'static/img/uploads',
            public_folder: '/img/uploads',
            collections: [
              {
                name: 'oversikt',
                label: 'Översikt',
                folder: 'docs/oversikt',
                create: true,
                extension: 'md',
                format: 'frontmatter',
                slug: '{{slug}}',
                fields: [
                  { label: 'ID', name: 'id', widget: 'string', required: false },
                  { label: 'Titel', name: 'title', widget: 'string' },
                  { label: 'Innehåll', name: 'body', widget: 'markdown' }
                ]
              },
              {
                name: 'projekt',
                label: 'Projekt',
                folder: 'docs/projekt',
                create: true,
                extension: 'md',
                format: 'frontmatter',
                slug: '{{slug}}',
                fields: [
                  { label: 'ID', name: 'id', widget: 'string', required: false },
                  { label: 'Titel', name: 'title', widget: 'string' },
                  { label: 'Innehåll', name: 'body', widget: 'markdown' }
                ]
              },
              {
                name: 'krav',
                label: 'Kravspecifikation',
                folder: 'docs/krav',
                create: true,
                extension: 'md',
                format: 'frontmatter',
                slug: '{{slug}}',
                fields: [
                  { label: 'ID', name: 'id', widget: 'string', required: false },
                  { label: 'Titel', name: 'title', widget: 'string' },
                  { label: 'Innehåll', name: 'body', widget: 'markdown' }
                ]
              },
              {
                name: 'anvandarberattelser',
                label: 'Användarberättelser',
                folder: 'docs/anvandarberattelser',
                create: true,
                extension: 'md',
                format: 'frontmatter',
                slug: '{{slug}}',
                fields: [
                  { label: 'ID', name: 'id', widget: 'string', required: false },
                  { label: 'Titel', name: 'title', widget: 'string' },
                  { label: 'Innehåll', name: 'body', widget: 'markdown' }
                ]
              }
            ]
          }
        });
      })();
    </script>
  </body>
</html>
